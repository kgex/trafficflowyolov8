<!DOCTYPE html>
<html>
<head>
  <title>RTSP Stream</title>
</head>
<body>
  <video id="video-player" autoplay></video>
  <script>
    const videoPlayer = document.getElementById("video-player");
    const streamUrl = "{{ url_for('stream') }}";
    const mediaSource = new MediaSource();
    videoPlayer.src = URL.createObjectURL(mediaSource);
    mediaSource.addEventListener("sourceopen", () => {
      const sourceBuffer = mediaSource.addSourceBuffer("video/mp4; codecs=avc1.42E01E");
      const eventSource = new EventSource(streamUrl);
      eventSource.onmessage = (event) => {
        sourceBuffer.appendBuffer(new Uint8Array(event.data));
      };
    });
  </script>
</body>
</html>
